The Docker Engine you're using is running in swarm mode.

Compose does not use swarm mode to deploy services to multiple nodes in a swarm. All containers will be scheduled on the current node.

To deploy your application across the swarm, use the bundle feature of the Docker experimental build.

More info:
https://docs.docker.com/compose/bundles

Starting mongodb
Recreating slave2
Starting slave1
Starting node-demo
Starting nginx-proxy
Attaching to mongodb, slave1, node-demo, slave2, nginx-proxy
[36mmongodb           |[0m + MONGO_LOG=/var/log/mongodb/mongod.log
[36mmongodb           |[0m + MONGO=/usr/bin/mongo
[36mmongodb           |[0m + MONGOD=/usr/bin/mongod
[36mmongodb           |[0m + /usr/bin/mongod --fork --replSet testset --noprealloc --smallfiles --logpath /var/log/mongodb/mongod.log
[33mslave1            |[0m + MONGO_LOG=/var/log/mongodb/mongod.log
[36mmongodb           |[0m note: noprealloc may hurt performance in many applications
[33mslave1            |[0m + MONGO=/usr/bin/mongo
[33mslave1            |[0m + MONGOD=/usr/bin/mongod
[33mslave1            |[0m + /usr/bin/mongod --fork --replSet testset --noprealloc --smallfiles --logpath /var/log/mongodb/mongod.log
[33mslave1            |[0m note: noprealloc may hurt performance in many applications
[33mslave1            |[0m about to fork child process, waiting until server is ready for connections.
[36mmongodb           |[0m about to fork child process, waiting until server is ready for connections.
[33mslave1            |[0m forked process: 10
[36mmongodb           |[0m forked process: 9
[35mslave2            |[0m + MONGO_LOG=/var/log/mongodb/mongod.log
[33mslave1            |[0m ++ uname -n
[35mslave2            |[0m + MONGO=/usr/bin/mongo
[31mnginx-proxy       |[0m [0;37;1mforego     | [0mstarting nginx.1 on port 5000
[33mslave1            |[0m + '[' '!' mongodb == slave1 ']'
[35mslave2            |[0m + MONGOD=/usr/bin/mongod
[36mmongodb           |[0m child process started successfully, parent exiting
[33mslave1            |[0m + /usr/bin/mongo --eval 'rs.initiate()'
[31mnginx-proxy       |[0m [0;37;1mforego     | [0mstarting dockergen.1 on port 5100
[31mnginx-proxy       |[0m [0;33;1mdockergen.1 | [0;31;1m2016/11/07 22:04:58 Generated '/etc/nginx/conf.d/default.conf' from 5 containers
[36mmongodb           |[0m ++ uname -n
[35mslave2            |[0m + /usr/bin/mongod --fork --replSet testset --noprealloc --smallfiles --logpath /var/log/mongodb/mongod.log
[31mnginx-proxy       |[0m [0m[0;33;1mdockergen.1 | [0;31;1m2016/11/07 22:04:58 Running 'nginx -s reload'
[36mmongodb           |[0m + '[' '!' mongodb == mongodb ']'
[31mnginx-proxy       |[0m [0m[0;33;1mdockergen.1 | [0;31;1m2016/11/07 22:04:58 Watching docker events
[36mmongodb           |[0m + /usr/bin/mongo --host mongodb --eval db
[35mslave2            |[0m note: noprealloc may hurt performance in many applications
[35mslave2            |[0m about to fork child process, waiting until server is ready for connections.
[33mslave1            |[0m child process started successfully, parent exiting
[36mmongodb           |[0m MongoDB shell version: 3.2.10
[33mslave1            |[0m MongoDB shell version: 3.2.10
[35mslave2            |[0m forked process: 11
[35mslave2            |[0m child process started successfully, parent exiting
[35mslave2            |[0m ++ uname -n
[36mmongodb           |[0m connecting to: mongodb:27017/test
[33mslave1            |[0m connecting to: test
[33mslave1            |[0m {
[33mslave1            |[0m 	"info2" : "no configuration specified. Using a default configuration for the set",
[35mslave2            |[0m + '[' '!' mongodb == slave2 ']'
[33mslave1            |[0m 	"me" : "slave1:27017",
[33mslave1            |[0m 	"info" : "try querying local.system.replset to see current configuration",
[36mmongodb           |[0m test
[35mslave2            |[0m + /usr/bin/mongo --eval 'rs.initiate()'
[33mslave1            |[0m 	"ok" : 0,
[36mmongodb           |[0m + sleep 30
[35mslave2            |[0m MongoDB shell version: 3.2.10
[33mslave1            |[0m 	"errmsg" : "already initialized",
[33mslave1            |[0m 	"code" : 23
[33mslave1            |[0m }
[35mslave2            |[0m connecting to: test
[33mslave1            |[0m + sleep 30
[35mslave2            |[0m {
[35mslave2            |[0m 	"info2" : "no configuration specified. Using a default configuration for the set",
[35mslave2            |[0m 	"me" : "slave2:27017",
[35mslave2            |[0m 	"info" : "try querying local.system.replset to see current configuration",
[35mslave2            |[0m 	"ok" : 0,
[35mslave2            |[0m 	"errmsg" : "already initialized",
[35mslave2            |[0m 	"code" : 23
[35mslave2            |[0m }
[35mslave2            |[0m + sleep 30
[31mnginx-proxy       |[0m [0m[0;33;1mdockergen.1 | [0;31;1m2016/11/07 22:04:58 Contents of /etc/nginx/conf.d/default.conf did not change. Skipping notification 'nginx -s reload'
[32mnode-demo         |[0m Mon, 07 Nov 2016 22:05:08 GMT morgan deprecated morgan(options): use morgan("default", options) instead at config/express.js:56:31
[32mnode-demo         |[0m Mon, 07 Nov 2016 22:05:08 GMT morgan deprecated default format: use combined format at config/express.js:56:31
[32mnode-demo         |[0m { MongoError: no primary found in replicaset
[32mnode-demo         |[0m     at /tmp/demo/src/node_modules/mongodb-core/lib/topologies/replset.js:628:32
[32mnode-demo         |[0m     at Server.<anonymous> (/tmp/demo/src/node_modules/mongodb-core/lib/topologies/replset.js:420:24)
[32mnode-demo         |[0m     at Server.g (events.js:291:16)
[32mnode-demo         |[0m     at emitOne (events.js:96:13)
[32mnode-demo         |[0m     at Server.emit (events.js:188:7)
[32mnode-demo         |[0m     at /tmp/demo/src/node_modules/mongodb-core/lib/topologies/server.js:283:14
[32mnode-demo         |[0m     at /tmp/demo/src/node_modules/mongodb-core/lib/connection/pool.js:455:18
[32mnode-demo         |[0m     at _combinedTickCallback (internal/process/next_tick.js:67:7)
[32mnode-demo         |[0m     at process._tickCallback (internal/process/next_tick.js:98:9)
[32mnode-demo         |[0m   name: 'MongoError',
[32mnode-demo         |[0m   message: 'no primary found in replicaset' }
[32mnode-demo         |[0m 
[32mnode-demo         |[0m /tmp/demo/src/node_modules/mongodb/lib/mongo_client.js:225
[32mnode-demo         |[0m           throw err
[32mnode-demo         |[0m           ^
[32mnode-demo         |[0m MongoError: no primary found in replicaset
[32mnode-demo         |[0m     at /tmp/demo/src/node_modules/mongodb-core/lib/topologies/replset.js:628:32
[32mnode-demo         |[0m     at Server.<anonymous> (/tmp/demo/src/node_modules/mongodb-core/lib/topologies/replset.js:420:24)
[32mnode-demo         |[0m     at Server.g (events.js:291:16)
[32mnode-demo         |[0m     at emitOne (events.js:96:13)
[32mnode-demo         |[0m     at Server.emit (events.js:188:7)
[32mnode-demo         |[0m     at /tmp/demo/src/node_modules/mongodb-core/lib/topologies/server.js:283:14
[32mnode-demo         |[0m     at /tmp/demo/src/node_modules/mongodb-core/lib/connection/pool.js:455:18
[32mnode-demo         |[0m     at _combinedTickCallback (internal/process/next_tick.js:67:7)
[32mnode-demo         |[0m     at process._tickCallback (internal/process/next_tick.js:98:9)
[32mnode-demo         |[0m OOPS 1
[32mnode-demo         |[0m Mon, 07 Nov 2016 22:05:18 GMT morgan deprecated morgan(options): use morgan("default", options) instead at config/express.js:56:31
[32mnode-demo         |[0m Mon, 07 Nov 2016 22:05:18 GMT morgan deprecated default format: use combined format at config/express.js:56:31
[32mnode-demo         |[0m { MongoError: no primary found in replicaset
[32mnode-demo         |[0m     at /tmp/demo/src/node_modules/mongodb-core/lib/topologies/replset.js:628:32
[32mnode-demo         |[0m     at Server.<anonymous> (/tmp/demo/src/node_modules/mongodb-core/lib/topologies/replset.js:420:24)
[32mnode-demo         |[0m     at Server.g (events.js:291:16)
[32mnode-demo         |[0m     at emitOne (events.js:96:13)
[32mnode-demo         |[0m     at Server.emit (events.js:188:7)
[32mnode-demo         |[0m     at /tmp/demo/src/node_modules/mongodb-core/lib/topologies/server.js:283:14
[32mnode-demo         |[0m     at /tmp/demo/src/node_modules/mongodb-core/lib/connection/pool.js:455:18
[32mnode-demo         |[0m     at _combinedTickCallback (internal/process/next_tick.js:67:7)
[32mnode-demo         |[0m     at process._tickCallback (internal/process/next_tick.js:98:9)
[32mnode-demo         |[0m   name: 'MongoError',
[32mnode-demo         |[0m   message: 'no primary found in replicaset' }
[32mnode-demo         |[0m 
[32mnode-demo         |[0m /tmp/demo/src/node_modules/mongodb/lib/mongo_client.js:225
[32mnode-demo         |[0m           throw err
[32mnode-demo         |[0m           ^
[32mnode-demo         |[0m MongoError: no primary found in replicaset
[32mnode-demo         |[0m     at /tmp/demo/src/node_modules/mongodb-core/lib/topologies/replset.js:628:32
[32mnode-demo         |[0m     at Server.<anonymous> (/tmp/demo/src/node_modules/mongodb-core/lib/topologies/replset.js:420:24)
[32mnode-demo         |[0m     at Server.g (events.js:291:16)
[32mnode-demo         |[0m     at emitOne (events.js:96:13)
[32mnode-demo         |[0m     at Server.emit (events.js:188:7)
[32mnode-demo         |[0m     at /tmp/demo/src/node_modules/mongodb-core/lib/topologies/server.js:283:14
[32mnode-demo         |[0m     at /tmp/demo/src/node_modules/mongodb-core/lib/connection/pool.js:455:18
[32mnode-demo         |[0m     at _combinedTickCallback (internal/process/next_tick.js:67:7)
[32mnode-demo         |[0m     at process._tickCallback (internal/process/next_tick.js:98:9)
[32mnode-demo         |[0m OOPS 1
[36mmongodb           |[0m + wait
[36mmongodb           |[0m + sleep 30
[33mslave1            |[0m + wait
[33mslave1            |[0m + sleep 30
[35mslave2            |[0m + wait
[35mslave2            |[0m + sleep 30
[32mnode-demo         |[0m Mon, 07 Nov 2016 22:05:29 GMT morgan deprecated morgan(options): use morgan("default", options) instead at config/express.js:56:31
[32mnode-demo         |[0m Mon, 07 Nov 2016 22:05:29 GMT morgan deprecated default format: use combined format at config/express.js:56:31
[32mnode-demo         |[0m { MongoError: no primary found in replicaset
[32mnode-demo         |[0m     at /tmp/demo/src/node_modules/mongodb-core/lib/topologies/replset.js:628:32
[32mnode-demo         |[0m     at Server.<anonymous> (/tmp/demo/src/node_modules/mongodb-core/lib/topologies/replset.js:420:24)
[32mnode-demo         |[0m     at Server.g (events.js:291:16)
[32mnode-demo         |[0m     at emitOne (events.js:96:13)
[32mnode-demo         |[0m     at Server.emit (events.js:188:7)
[32mnode-demo         |[0m     at /tmp/demo/src/node_modules/mongodb-core/lib/topologies/server.js:283:14
[32mnode-demo         |[0m     at /tmp/demo/src/node_modules/mongodb-core/lib/connection/pool.js:455:18
[32mnode-demo         |[0m     at _combinedTickCallback (internal/process/next_tick.js:67:7)
[32mnode-demo         |[0m     at process._tickCallback (internal/process/next_tick.js:98:9)
[32mnode-demo         |[0m   name: 'MongoError',
[32mnode-demo         |[0m   message: 'no primary found in replicaset' }
[32mnode-demo         |[0m 
[32mnode-demo         |[0m /tmp/demo/src/node_modules/mongodb/lib/mongo_client.js:225
[32mnode-demo         |[0m           throw err
[32mnode-demo         |[0m           ^
[32mnode-demo         |[0m MongoError: no primary found in replicaset
[32mnode-demo         |[0m     at /tmp/demo/src/node_modules/mongodb-core/lib/topologies/replset.js:628:32
[32mnode-demo         |[0m     at Server.<anonymous> (/tmp/demo/src/node_modules/mongodb-core/lib/topologies/replset.js:420:24)
[32mnode-demo         |[0m     at Server.g (events.js:291:16)
[32mnode-demo         |[0m     at emitOne (events.js:96:13)
[32mnode-demo         |[0m     at Server.emit (events.js:188:7)
[32mnode-demo         |[0m     at /tmp/demo/src/node_modules/mongodb-core/lib/topologies/server.js:283:14
[32mnode-demo         |[0m     at /tmp/demo/src/node_modules/mongodb-core/lib/connection/pool.js:455:18
[32mnode-demo         |[0m     at _combinedTickCallback (internal/process/next_tick.js:67:7)
[32mnode-demo         |[0m     at process._tickCallback (internal/process/next_tick.js:98:9)
[32mnode-demo         |[0m OOPS 1
